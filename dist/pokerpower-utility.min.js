(function(){"use strict";function p(){const s=document.querySelector(".navigation_mobile_trigger"),n=document.querySelector(".mobile_trigger_open"),a=document.querySelector(".mobile_trigger_close"),t=document.querySelector(".navigation_menu");if(!s||!t||!n||!a)return;let e=!1,o=!1;const i=()=>{if(!o)if(o=!0,e){const u=t.offsetHeight;gsap.set(t,{height:u,overflow:"hidden"}),gsap.timeline({onComplete:()=>{gsap.set(t,{clearProps:"all",display:"none"}),e=!1,o=!1}}).to(t,{height:0,duration:.4,ease:"power2.inOut"}).to(a,{autoAlpha:0,duration:.3},0).to(n,{autoAlpha:1,duration:.3},0)}else{gsap.set(t,{display:"flex"});const u=t.scrollHeight;gsap.timeline({onComplete:()=>{e=!0,o=!1}}).fromTo(t,{height:0,overflow:"hidden"},{height:u,duration:.4,ease:"power2.inOut",clearProps:"height"}).to(n,{autoAlpha:0,duration:.3},0).to(a,{autoAlpha:1,duration:.3},0)}};s.addEventListener("click",()=>{window.getComputedStyle(s).display!=="none"&&i()}),new ResizeObserver(()=>{window.getComputedStyle(s).display!=="none"||(gsap.set(t,{display:"none"}),gsap.set(n,{autoAlpha:1}),gsap.set(a,{autoAlpha:0}),e=!1,o=!1)}).observe(s)}function b(){const s=document.querySelector("[data-modal-group-status]"),n=document.querySelectorAll("[data-modal-name]"),a=document.querySelectorAll("[data-modal-target]");a.forEach(e=>{e.addEventListener("click",function(){const o=this.getAttribute("data-modal-target");a.forEach(i=>i.setAttribute("data-modal-status","not-active")),n.forEach(i=>i.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${o}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${o}"]`).setAttribute("data-modal-status","active"),s&&s.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",t)}),document.addEventListener("keydown",function(e){e.key==="Escape"&&t()});function t(){a.forEach(e=>e.setAttribute("data-modal-status","not-active")),s&&s.setAttribute("data-modal-group-status","not-active"),document.querySelectorAll("[data-modal-name] .youtube-wrapper").forEach(e=>{const o=e.querySelector(".youtube-thumbnail"),i=e.querySelector(".youtube-iframe");if(o&&i){const r=i.querySelector("iframe");r&&r.remove(),o.style.display="block",i.style.display="none"}})}}function g(){document.querySelectorAll("[data-button-label]").forEach(a=>{const t=a.textContent;a.innerHTML="",[...t].forEach((e,o)=>{const i=document.createElement("span");i.textContent=e,i.style.transitionDelay=`${o*.01}s`,e===" "&&(i.style.whiteSpace="pre"),a.appendChild(i)})})}function w(){const s=document.querySelector(".testimonial_wrap");if(!s)return;const n=s.querySelector(".testimonial_contain");s.querySelectorAll(".testimonial_card").forEach(c=>{const m=c.cloneNode(!0);n.appendChild(m)});const t=s.querySelectorAll(".testimonial_card"),e=t.length/2;let o=0,i,r=[],u=n.clientWidth/2,l=gsap.utils.wrap(-u,0);i=gsap.quickTo(n,"x",{duration:.5,modifiers:{x:gsap.utils.unitize(l)},ease:"power3"});for(let c=0;c<e;c++)r.push((Math.random()-.5)*20);const d=gsap.timeline({paused:!0});d.to(t,{rotate:c=>r[c%e],xPercent:c=>r[c%e],yPercent:c=>r[c%e],scale:.95,duration:.5,ease:"back.inOut(3)"}),Observer.create({target:n,type:"pointer,touch",onPress:()=>d.play(),onDrag:c=>{o+=c.deltaX,i(o)},onRelease:()=>d.reverse(),onStop:()=>d.reverse()}),gsap.ticker.add(k);function k(c,m){o-=m/25,i(o)}let v;window.addEventListener("resize",()=>{clearTimeout(v),v=setTimeout(()=>{const c=gsap.getProperty(n,"x");u=n.clientWidth/2,l=gsap.utils.wrap(-u,0),o=c,i=gsap.quickTo(n,"x",{duration:.5,modifiers:{x:gsap.utils.unitize(l)},ease:"power3"}),i(o)},200)})}function E(){const s=document.querySelector(".navigation_wrap")?.offsetHeight||0,n=document.querySelectorAll(".section_skill .skill_wrap");n.length&&n.forEach(a=>{const t=a.querySelector(".skill_contain"),e=a.querySelector(".skill_layout");if(!t||!e)return;const o=gsap.timeline({scrollTrigger:{pin:t,trigger:a,start:`top-=${s} top`,end:()=>`+=${a.offsetHeight+window.innerHeight*.5}`,scrub:!0}});o.to({},{duration:.5}),o.to(e,{rotationZ:(Math.random()-.5)*10,scale:.7,rotationX:40,ease:"power1.in"}),o.to(e,{autoAlpha:0,ease:"power1.in"})})}function f(){gsap.matchMedia().add("(min-width: 992px)",()=>{const n=document.querySelector('[data-nav-trigger="for-individuals"]'),a=document.querySelector('[data-nav-panel="for-individuals"]');if(!n||!a)return;const t=a.querySelectorAll("[data-nav-section-toggle]");let e=!1;t.forEach(l=>l.setAttribute("tabindex","-1"));const o=gsap.timeline({paused:!0,defaults:{duration:.3,ease:"power2.out"}}).fromTo(a,{autoAlpha:0,y:-10},{autoAlpha:1,y:0}),i=()=>{e||(e=!0,o.play(),n.setAttribute("aria-expanded","true"),n.classList.add("is-active"))},r=()=>{e&&(e=!1,o.reverse(),n.setAttribute("aria-expanded","false"),n.classList.remove("is-active"))},u=()=>!a.contains(document.activeElement)&&!n.contains(document.activeElement);return n.addEventListener("mouseenter",i),a.addEventListener("mouseenter",i),n.addEventListener("mouseleave",()=>{setTimeout(()=>{!a.matches(":hover")&&!n.matches(":hover")&&r()},100)}),a.addEventListener("mouseleave",()=>{setTimeout(()=>{!a.matches(":hover")&&!n.matches(":hover")&&r()},100)}),n.addEventListener("focusin",i),n.addEventListener("keydown",l=>{l.key==="Enter"||l.key===" "?(l.preventDefault(),e?r():i()):l.key==="Escape"&&(r(),n.focus())}),a.addEventListener("keydown",l=>{l.key==="Escape"&&(r(),n.focus())}),document.addEventListener("focusin",()=>{e&&setTimeout(()=>{u()&&r()},0)}),()=>{t.forEach(l=>l.removeAttribute("tabindex"))}})}function S(){document.querySelectorAll(".youtube-wrapper").forEach(s=>{const n=s.querySelector(".youtube-thumbnail"),a=s.querySelector(".youtube-iframe");!n||!a||n.addEventListener("click",()=>{if(!a.querySelector("iframe")){const t=n.style.backgroundImage.match(/vi\/([^/]+)\//),e=t?t[1]:null;if(!e)return;const o=document.createElement("iframe");o.src="https://www.youtube.com/embed/"+e+"?autoplay=1",o.frameBorder="0",o.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",o.allowFullscreen=!0,o.loading="lazy",o.style.width="100%",o.style.height="100%",a.appendChild(o)}n.style.display="none",a.style.display="block"})})}function h(){gsap.matchMedia().add("(max-width: 991px)",()=>{const n=document.querySelectorAll("[data-nav-section-toggle]");return n.forEach(a=>{const t=a.nextElementSibling;if(!t||!t.classList.contains("nav_submenu_panel"))return;let e=!1,o=!1;gsap.set(t,{height:0,display:"none",overflow:"hidden"}),a.setAttribute("aria-expanded","false");const i=()=>{o||(o=!0,e?(gsap.to(t,{height:0,duration:.4,ease:"power2.inOut",onComplete:()=>{gsap.set(t,{clearProps:"all",display:"none"}),e=!1,o=!1}}),a.setAttribute("aria-expanded","false")):(gsap.set(t,{display:"block"}),gsap.to(t,{height:t.scrollHeight,duration:.4,ease:"power2.out",onComplete:()=>{gsap.set(t,{clearProps:"height"}),e=!0,o=!1}}),a.setAttribute("aria-expanded","true")))};a.addEventListener("click",i),a.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),i())})}),()=>{n.forEach(a=>{const t=a.nextElementSibling;!t||!t.classList.contains("nav_submenu_panel")||(gsap.set(t,{clearProps:"all"}),a.setAttribute("aria-expanded","false"))})}})}function y(){gsap.matchMedia().add("(max-width: 991px)",()=>{const n=document.querySelectorAll("[data-nav-section-toggle]"),a=[];return n.forEach(t=>{const e=t.nextElementSibling;if(!e||!e.classList.contains("submenu_link_contain"))return;gsap.set(e,{height:0,overflow:"hidden",display:"flex"});let o=!1,i=!1;const r=()=>{if(console.log("trigger has been clicked"),i)return;i=!0;const u=e.scrollHeight,l=gsap.timeline({onComplete:()=>{o=!o,i=!1,o||gsap.set(e,{height:0})}});o?l.to(e,{height:0,duration:.4,ease:"power2.inOut"}):l.to(e,{height:u,duration:.4,ease:"power2.out",onComplete:()=>gsap.set(e,{height:"auto"})}),t.classList.toggle("is-open")};t.addEventListener("click",r),a.push({trigger:t,submenu:e,onClick:r})}),()=>{a.forEach(({trigger:t,submenu:e,onClick:o})=>{t.removeEventListener("click",o),t.classList.remove("is-open"),gsap.set(e,{clearProps:"height,overflow,display"}),console.log("reset submenu")})}})}function A(){p(),g(),f(),h(),y()}window.PokerPower={initMobileNavToggle:p,initModalBasic:b,initButtonCharacterStagger:g,initTestimonialsDelayed:()=>gsap.delayedCall(.2,w),initPinnedSkills:E,initNavDesktop:f,initNavMobile:h,initMobileSubmenuToggle:y,initLazyYouTube:S,autoInit:A},document.addEventListener("DOMContentLoaded",()=>{window.PokerPower?.autoInit&&window.PokerPower.autoInit()})})();
